#!/bin/bash
set -e

SCRIPT_PATH="$(readlink -f "$0")"
DOTFILES_DIR="$(cd "$(dirname "$SCRIPT_PATH")/../../.." && pwd)"
IGNORE_DIRS="scripts .git"

cd "$DOTFILES_DIR"

for dir in */; do
    dir="${dir%/}"

    if echo "$IGNORE_DIRS" | grep -qw "$dir"; then
        continue
    fi

    echo "Stowing $dir..."
    stow --adopt "$dir"
done

echo "Done"
